2.17 简述一下虚拟内存和物理内存，为什么要用虚拟内存，好处是什么？
参考回答

1.物理内存：物理内存有四个层次，分别是寄存器、高速缓存、主存、磁盘。

    寄存器：速度最快、量少、价格贵。

    高速缓存：次之。

    主存：再次之。

    磁盘：速度最慢、量多、价格便宜。


操作系统会对物理内存进行管理，有一个部分称为内存管理器(memory manager)，它的主要工作是有效的管理内存，记录哪些内存是正在使用的，在进程需要时分配内存以及在进程完成时回收内存。


2.虚拟内存：操作系统为每一个进程分配一个独立的地址空间，但是虚拟内存。虚拟内存与物理内存存在映射关系，通过页表寻址完成虚拟地址和物理地址的转换。


3.为什么要用虚拟内存：
因为早期的内存分配方法存在以下问题：
（1）进程地址空间不隔离。会导致数据被随意修改。

（2）内存使用效率低。

（3）程序运行的地址不确定。操作系统随机为进程分配内存空间，所以程序运行的地址是不确定的。


4.使用虚拟内存的好处：

（1）扩大地址空间。每个进程独占一个4G空间，虽然真实物理内存没那么多。

（2）内存保护：防止不同进程对物理内存的争夺和践踏，可以对特定内存地址提供写保护，防止恶意篡改。

（3）可以实现内存共享，方便进程通信。

（4）可以避免内存碎片，虽然物理内存可能不连续，但映射到虚拟内存上可以连续。

5.使用虚拟内存的缺点：

（1）虚拟内存需要额外构建数据结构，占用空间。

（2）虚拟地址到物理地址的转换，增加了执行时间。

（3）页面换入换出耗时。

（4）一页如果只有一部分数据，浪费内存。