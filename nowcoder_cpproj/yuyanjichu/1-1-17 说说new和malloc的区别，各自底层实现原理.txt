1.1.17 说说new和malloc的区别，各自底层实现原理。
参考回答

1.new是操作符，而malloc是函数。

2.new在调用的时候先分配内存，在调用构造函数，释放的时候调用析构函数；而malloc没有构造函数和析构函数。

3.malloc需要给定申请内存的大小，返回的指针需要强转；new会调用构造函数，不用指定内存的大小，返回指针不用强转。

4.new可以被重载；malloc不行

5.new分配内存更直接和安全。

6.new发生错误抛出异常，malloc返回null

答案解析

malloc底层实现：当开辟的空间小于 128K 时，调用 brk（）函数；当开辟的空间大于 128K 时，调用mmap（）。malloc采用的是内存池的管理方式，以减少内存碎片。先申请大块内存作为堆区，然后将堆区分为多个内存块。当用户申请内存时，直接从堆区分配一块合适的空闲快。采用隐式链表将所有空闲块，每一个空闲块记录了一个未分配的、连续的内存地址。

new底层实现：关键字new在调用构造函数的时候实际上进行了如下的几个步骤：

1.创建一个新的对象

2.将构造函数的作用域赋值给这个新的对象（因此this指向了这个新的对象）

3.执行构造函数中的代码（为这个新对象添加属性）

4.返回新对象